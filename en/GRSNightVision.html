<!--
title: GRS: Night Vision
description: 
published: true
date: 2026-01-10T06:09:00.711Z
tags: 
editor: code
dateCreated: 2026-01-08T16:21:42.520Z
-->

# GRS Night Vision and Lights Mod
## Comprehensive Technical Overview

**Version:** 1.0  
**Platform:** Arma Reforger (Enfusion Engine)  
**Author:** GRS Development Team  
**Date:** January 2026

---

## Executive Summary

The GRS Night Vision and Lights mod is a comprehensive equipment enhancement system for Arma Reforger that provides realistic night vision, thermal imaging, and tactical lighting capabilities. The mod features full multiplayer synchronization, intuitive radial menu controls, and extensive customization options.

### Key Highlights

- **Night Vision System** with adjustable gain, auto-brightness, and multiple phosphor color options
- **Thermal Imaging** with configurable color palettes
- **Tactical Lighting** including flashlights, IR illuminators, and strobes
- **8 Light Colors** for all lighting systems (White, Red, Green, Blue, Yellow, Orange, Cyan, Magenta)
- **Full Network Replication** ensuring all players see consistent equipment states
- **Radial Menu Interface** for quick, intuitive equipment control
- **Keybind Support** for rapid access to common functions

---

## System Components

### 1. Night Vision System (`GRS_NightVisionComponent`)

The night vision system provides realistic NVG simulation with the following features:

#### Core Features
| Feature | Description |
|---------|-------------|
| **Manual Brightness Control** | Adjustable gain from 0.05 to 20 LV with adaptive step sizes |
| **Auto-Brightness System** | Automatic on/off based on time of day (configurable dawn/dusk hours) |
| **Phosphor Color Selection** | Multiple phosphor options (Green, White, Blue, Amber, Red, etc.) |
| **Film Grain Effect** | Authentic NVG visual noise overlay |
| **Signal Blemish Effect** | Optional tube imperfection simulation |

#### Auto-System Behavior
- Automatically activates NVG at dusk (default: 19:00)
- Automatically deactivates at dawn (default: 07:00)
- Manual override available (day/night override states preserved)
- Smooth brightness transitions

#### Default Keybinds
| Action | Key |
|--------|-----|
| Toggle NVG | `N` |
| Increase Brightness | `Shift + Scroll Up` |
| Decrease Brightness | `Shift + Scroll Down` |
| Reset Brightness | `Shift + R` |
| Toggle Auto-Gain | `Shift + G` |
| Cycle Phosphor Color | `Shift + N` |

---

### 2. Thermal Imaging System (`GRS_ThermalComponentV2`)

Stand-alone thermal imaging component with configurable palettes.

#### Features
| Feature | Description |
|---------|-------------|
| **Multiple Palettes** | White-Hot, Black-Hot, and custom color schemes |
| **Palette Cycling** | Quick switching between thermal views |
| **NVG Integration** | Can be combined with NVG devices or used standalone |

---

### 3. Tactical Lighting System (`GRS_NVL_LightsComponent`)

Comprehensive lighting system for flashlights and IR illuminators.

#### Features
| Feature | Description |
|---------|-------------|
| **Flashlight Mode** | Visible light with adjustable brightness (0.1 - 6.0 LV) |
| **IR Illuminator Mode** | Infrared light visible only through NVG |
| **8 Color Options** | White, Red, Green, Blue, Yellow, Orange, Cyan, Magenta |
| **IR Cover System** | Toggle IR filter to make IR light visible without NVG |
| **Brightness Control** | Real-time adjustment with network sync |

#### Default Keybinds
| Action | Key |
|--------|-----|
| Toggle Flashlight | `L` |
| Toggle IR Light | `;` |
| Brightness Up | `]` |
| Brightness Down | `[` |
| Open Radial Menu | `,` |

---

### 4. Strobe System (`GRS_NVL_StrobeComponent`)

Tactical strobe lighting for identification and signaling.

#### Features
| Feature | Description |
|---------|-------------|
| **Configurable Pattern** | Custom on/off timing sequences |
| **IR/Visible Modes** | IR strobe (NVG only) or visible strobe |
| **8 Color Options** | Same color palette as flashlights |
| **Brightness Control** | Adjustable from 0.1 to 6.0 LV |
| **IR Cover Toggle** | Convert IR strobe to visible strobe |

#### Default Pattern
Double-flash pattern: `0.08s ON → 0.08s OFF → 0.08s ON → 0.6s OFF`

#### Default Keybind
| Action | Key |
|--------|-----|
| Toggle Strobe | `'` (Apostrophe) |

---

### 5. IR Visibility System (`GRS_IRSystem`)

Global system managing IR light visibility across all players.

#### Behavior
- IR lights only visible when local player has NVG active
- Automatically updates all IR sources when NVG state changes
- Supports both player equipment and weapon-mounted lights

---

### 6. Radial Menu System (`GRS_RadialMenuItemsComponent`)

Intuitive visual interface for equipment control.

#### Menu Structure
```
Device Category (e.g., "PEQ-15")
├── Flashlight [ON/OFF]
├── IR Light [ON/OFF]
├── Color [Current Color]
│   ├── White
│   ├── Red
│   ├── Green
│   ├── Blue
│   ├── Yellow
│   ├── Orange
│   ├── Cyan
│   └── Magenta
├── IR Cover [ON/REMOVED]
└── Strobe [ON/OFF]
    ├── Color [Current Color]
    │   └── (8 color options)
    └── IR Cover [ON/REMOVED]

NVG Device
├── NVG [ON/OFF]
├── Phosphor Color [Current]
│   └── (Dynamic color options)
└── Thermal [ON/OFF] (if equipped)
```

#### Supported Equipment Locations
- Weapon attachments (rails, accessories)
- Helmet-mounted devices
- Body-worn equipment
- Dedicated equipment slots (NVG slot, Strobe slot, etc.)

---

## Network Architecture

### Replication Model

All equipment states are fully synchronized across multiplayer sessions using a client-authoritative model with server validation.

#### Synchronized States
| Component | Synced Data |
|-----------|-------------|
| **Lights** | On/Off, Color Index, Brightness, IR Cover State |
| **Strobe** | Enabled, Color Index, Brightness, IR Cover State |
| **NVG** | Active State, Animation State |
| **Thermal** | Active State |

#### RPC Flow
```
Client Action → Local Apply → RPC to Server → Server Validates → Broadcast to All Clients
```

#### Network Component (`GRS_NVL_NetworkComponent`)
- Lives on character prefab
- Handles all equipment RPCs
- Recursively searches character and weapons for equipment
- Prevents duplicate RPC calls with suppression flags

---

## Technical Specifications

### Performance Considerations
- Brightness adjustment rate-limited to 50ms intervals
- Auto-system checks every 0.5 seconds
- Deferred initialization (100-200ms) for network stability
- Efficient recursive component searches

### Material System
| Effect | Post-Process Slot |
|--------|-------------------|
| Thermal Imaging | Slot 11 |
| Film Grain | Slot 9 |
| Blemish/Noise | Slot 8 |
| HDR Colorization | Slot 16 |

### Brightness Ranges
| System | Min | Max | Default |
|--------|-----|-----|---------|
| NVG Gain | 0.05 | 20.0 | 1.5 |
| Flashlight | 0.1 | 6.0 | 6.0 |
| IR Light | 0.1 | 6.0 | 1.0 |
| Strobe | 0.1 | 6.0 | 3.0 |

---

## Configuration

### Prefab Attributes

#### NVG Component
```
m_fBaseBrightness: 1.5
m_bManualBrightnessEnabled: true
m_bAutoSystemEnabled: true
m_iDawnHour: 7
m_iDuskHour: 19
m_fTransitionRate: 0.5
```

#### Lights Component
```
m_fDefaultFlashlightBrightness: 6.0
m_fDefaultIRBrightness: 1.0
m_fMinBrightness: 0.1
m_fMaxBrightness: 6.0
m_fBrightnessStep: 0.2
```

#### Strobe Component
```
m_sStrobePattern: "0.08 0.08 0.08 0.6"
m_fDefaultBrightness: 3.0
m_fMinBrightness: 0.1
m_fMaxBrightness: 6.0
```

---

## Equipment Slot System

Custom equipment slots for dedicated gear:

| Slot Name | Purpose |
|-----------|---------|
| `GRS_NV_ItemSlot` | Night vision devices |
| `GRS_Strobe` | Body-worn strobes |
| `GRS_Vlite` | V-Lite markers |
| `GRS_Raillite` | Rail-mounted lights |

---

## Integration Points

### Required Dependencies
- `SCR_GadgetComponent` (base gadget functionality)
- `SCR_PlayerController` (player detection)
- `EquipedLoadoutStorageComponent` (equipment access)
- `BaseWeaponManagerComponent` (weapon attachment access)

### Optional Integration
- `SCR_AdditionalGameModeSettingsComponent` (vanilla night noise disable)
- `SignalsManagerComponent` (animation control)

---

## File Structure

```
GRS Night Vision and Lights/
├── Scripts/
│   └── Game/
│       ├── NightVision/
│       │   └── GRS_NightVisionComponent.c
│       ├── Thermal/
│       │   └── GRS_ThermalComponentV2.c
│       ├── Lights/
│       │   ├── GRS_NVL_LightsComponent.c
│       │   ├── GRS_NVL_StrobeComponent.c
│       │   ├── GRS_NVL_NetworkComponent.c
│       │   ├── GRS_NVL_HelmetLightSource.c
│       │   └── GRS_IRSystem.c
│       └── RadialMenu/
│           └── GRS_RadialMenuItemsComponent.c
├── Configs/
│   ├── Input/
│   │   ├── chimeraInputCommon.conf
│   │   └── keyBindingMenu.conf
│   └── ControlHints/
│       └── AvailableActions.conf
├── UI/
│   └── Textures/
│       └── Icons/
│           └── GRS_RadialMenu_Icons.imageset
└── Prefabs/
    └── (Equipment prefabs)
```

---

## Future Considerations

### Potential Enhancements
- Laser pointer integration
- PVS-31 binocular NVG simulation
- Additional strobe patterns
- IR laser/designator functionality
- Battery/power management system
- Zeroing integration for weapon lights

### Compatibility Notes
- Designed for forward compatibility with Enfusion updates
- Modular architecture allows component-level customization
- Network protocol designed for extensibility

---

## Summary

The GRS Night Vision and Lights mod provides a comprehensive, production-ready tactical equipment system for Arma Reforger. With full network replication, intuitive controls, and extensive customization options, it delivers an immersive and realistic night operations experience suitable for both casual play and serious milsim communities.

**Total Lines of Code:** ~4,500+  
**Components:** 8 major systems  
**Network RPCs:** 20+ synchronized actions  
**Customizable Options:** 50+ configurable attributes

---

*Document prepared for internal review and stakeholder presentation.*